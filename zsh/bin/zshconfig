#!/usr/bin/env zsh

plugin_usage() {
  print "Usage: zshconfig plugin command"
  print ""
  print "Available subcommands:"
  print "    list "
}

plugin_list() {
  for file in `ls $ZSH_HOME/plugins`; do
    echo ${file%.sh}
  done
}

plugin_edit() {
  if (( $# == 0 )) then
    print "Usage: zshconfig plugin edit [plugin]"
  else
    plugin_edit_run "$1"
  fi
}

plugin_edit_run() {
  "$EDITOR" "$ZSH_HOME/plugins/$1.sh"
}

usage() {
  print "Usage: zshconfig command"
  print ""
  print "Available subcommands:"
  print "    plugin "
}

plugin() {
  if (( $# == 0 )) then
    plugin_usage
  else
    if [[ "$1" == "list" ]]; then
      shift
      plugin_list "$@"
    elif [[ "$1" == "edit" ]]; then
      shift
      plugin_edit "$@"
    else
      plugin_usage
    fi
  fi
}

if (( $# == 0 )) then
  usage
else
  if [[ "$1" == "plugin" ]]; then
    shift
    plugin "$@"
  else
    usage
  fi
fi
